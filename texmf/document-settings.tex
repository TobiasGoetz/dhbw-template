\RequirePackage[l2tabu, orthodox]{nag} % Warn about outdated packages and commands

% Define if-includes. Default: false
\newif\ifrestrictionNotice\restrictionNoticefalse
\newif\ifincludeAuthorship\includeAuthorshipfalse
\newif\ifincludeAbstract\includeAbstractfalse
\newif\ifincludeAcronyms\includeAcronymsfalse
\newif\ifincludeListOfFigures\includeListOfFiguresfalse
\newif\ifincludeListOfTables\includeListOfTablesfalse
\newif\ifincludeListOfListings\includeListOfListingsfalse
\newif\ifincludeAppendix\includeAppendixfalse
\newif\ifincludeBibliography\includeBibliographyfalse

\input{config/config} % Load the user config
\input{texmf/packages} % Load the packages
\input{lang/strings} % Load the strings
\input{lang/\mylanguage} % Load the language specific strings

\input{texmf/colors}

%% Code highlighting
\newcommand{\listingsettings}{%
    \lstset{%
        language=Java,
    %numbers=left,
    %stepnumber=1,
    %numbersep=5pt,
    %numberstyle=\tiny,
        breaklines=true,
        breakautoindent=true,
        postbreak=\space,
        tabsize=2,
        basicstyle=\ttfamily\footnotesize,
        showspaces=false,
        showstringspaces=false,
        extendedchars=true,
        captionpos=b,
        backgroundcolor=\color{ListingBackground},
        xleftmargin=0pt,
        xrightmargin=0pt,
        frame=single,
        frameround=ffff,
        rulecolor=\color{darkgray},
    %fillcolor=\color{ListingBackground},
        keywordstyle=\color[rgb]{0.133,0.133,0.6},
        commentstyle=\color[rgb]{0.133,0.545,0.133},
        stringstyle=\color[rgb]{0.627,0.126,0.941},
        aboveskip=1.5em,
    }
}

\hypersetup{
    colorlinks=true,
    linkcolor=black,
    citecolor=LinkColor,
    filecolor=LinkColor,
    menucolor=LinkColor,
    urlcolor=LinkColor,
%linktocpage=true,
    linktoc=all,
    bookmarksnumbered=true,
}

\islang{de}{
    \DeclareOption{de}{
        \ExecuteBibliographyOptions{
            sortlocale=de_DE,
        }
    }
}
\islang{en}{
    \DeclareOption{en}{
        \ExecuteBibliographyOptions{
            sortlocale=en_US,
        }
    }
}

\ProcessOptions\relax

\loadbibresources

% Prevent widow and orphan lines
\clubpenalty = 10000
\widowpenalty = 10000
\displaywidowpenalty=10000

% Prevent breaking URLs apart
\setcounter{biburlnumpenalty}{100}
\setcounter{biburlucpenalty}{100}
\setcounter{biburllcpenalty}{100}

\graphicspath{{images/}}

\lstloadlanguages{Python, Java, C, C++, bash}

\lstdefinelanguage{yaml}{
    basicstyle=\normalfont\ttfamily,
    breaklines=true,
    frame=single,
    xleftmargin=2em,
    linewidth=0.9\linewidth,
    numbers=left,
    numbersep=5pt,
    numberstyle=\tiny,
    showstringspaces=false,
    aboveskip=1em,
    belowskip=1em,
    backgroundcolor=\color{gray!10},
    commentstyle=\color{green},
    keywordstyle=\color{blue},
    stringstyle=\color{red},
    literate={-}{-}1,
    morecomment=[l]{\#},
    morestring=[b]',
    morestring=[b]"
}

\lstdefinelanguage{Groovy}{
    basicstyle=\ttfamily\small,
    breaklines=true,
    frame=single,
    xleftmargin=2em,
    linewidth=0.9\linewidth,
    numbers=left,
    numbersep=5pt,
    numberstyle=\tiny,
    showstringspaces=false,
    aboveskip=1em,
    belowskip=1em,
    backgroundcolor=\color{gray!10},
    commentstyle=\color{green},
    keywordstyle=\color{blue},
    stringstyle=\color{red},
    keywords={
        def, return, if, in, else, while, do, this, try, catch, finally, switch, case, default, break, continue,
        throw, for, as, instanceof, new, abstract, assert, boolean, break, byte, case, catch, char, class, const,
        continue, default, do, double, else, enum, extends, final, finally, float, for, goto, if, implements, import,
        instanceof, int, interface, long, native, new, package, private, protected, public, return, short, static,
        strictfp, super, switch, synchronized, this, throw, throws, transient, try, void, volatile, while
    },
    morecomment=[l]{//},
    morecomment=[s]{/*}{*/},
    morestring=[b]",
    morestring=[b]'
}

\lstdefinelanguage{json}{
    basicstyle=\normalfont\ttfamily,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    backgroundcolor=\color{white},
    literate=
    *{0}{{{\color{blue}0}}}{1}
        {1}{{{\color{blue}1}}}{1}
        {2}{{{\color{blue}2}}}{1}
        {3}{{{\color{blue}3}}}{1}
        {4}{{{\color{blue}4}}}{1}
        {5}{{{\color{blue}5}}}{1}
        {6}{{{\color{blue}6}}}{1}
        {7}{{{\color{blue}7}}}{1}
        {8}{{{\color{blue}8}}}{1}
        {9}{{{\color{blue}9}}}{1}
        {:}{{{\color{red}{:}}}}{1}
        {,}{{{\color{red}{,}}}}{1}
        {\{}{{{\color{darkgray}{\{}}}}{1}
        {\}}{{{\color{darkgray}{\}}}}}{1}
        {[}{{{\color{darkgray}{[}}}}{1}
        {]}{{{\color{darkgray}{]}}}}{1},
}

\lstdefinelanguage{JavaScript}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{purple}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}

\islang{de}{\usepackage{icomma}}
